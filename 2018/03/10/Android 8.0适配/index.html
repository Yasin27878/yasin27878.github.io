<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Android 8.0é€‚é… | We&#39;re here to put a dent in the universe | çˆ±ç”Ÿæ´»ï¼Œçˆ±ç¼–ç¨‹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#212121">
    
    
    <meta name="keywords" content="Android,Android 8.0">
    <meta name="description" content="æœ¬æ–‡ä¸»è¦è¯´Android 8.0é€‚é…">
<meta name="keywords" content="Android,Android 8.0">
<meta property="og:type" content="article">
<meta property="og:title" content="Android 8.0é€‚é…">
<meta property="og:url" content="https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/index.html">
<meta property="og:site_name" content="We&#39;re here to put a dent in the universe">
<meta property="og:description" content="æœ¬æ–‡ä¸»è¦è¯´Android 8.0é€‚é…">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-01-24T10:09:25.702Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android 8.0é€‚é…">
<meta name="twitter:description" content="æœ¬æ–‡ä¸»è¦è¯´Android 8.0é€‚é…">
    
        <link rel="alternate" type="application/atom+xml" title="We&#39;re here to put a dent in the universe" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.png">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avater.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Yaisn Yao</h5>
          <a href="mailto:Yasin27878@163.com" title="Yasin27878@163.com" class="mail">Yasin27878@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                å½’æ¡£
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                æ ‡ç­¾
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                ç±»åˆ«
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/Yasin27878" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/ysweb" target="_blank">
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/custom">
                <i class="icon icon-lg icon-link"></i>
                å…¶ä»–
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Android 8.0é€‚é…</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Android 8.0é€‚é…</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-03-10T08:07:36.000Z" itemprop="datePublished" class="page-time">
  2018-03-10
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Android-8-0é€‚é…"><span class="post-toc-number">1.</span> <span class="post-toc-text">Android 8.0é€‚é…</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å‡†å¤‡å·¥ä½œ"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">å‡†å¤‡å·¥ä½œ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Android-8-0-è¡Œä¸ºå˜æ›´"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Android 8.0 è¡Œä¸ºå˜æ›´</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-æé†’çª—å£"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">1.æé†’çª—å£</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-åå°é™åˆ¶æ‰§è¡Œ"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">6.åå°é™åˆ¶æ‰§è¡Œ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#å‚è€ƒ"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">å‚è€ƒ</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-Android 8.0é€‚é…" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Android 8.0é€‚é…</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-03-10 16:07:36" datetime="2018-03-10T08:07:36.000Z" itemprop="datePublished">2018-03-10</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>æœ¬æ–‡ä¸»è¦è¯´Android 8.0é€‚é…<br><a id="more"></a></p>
<h1 id="Android-8-0é€‚é…"><a href="#Android-8-0é€‚é…" class="headerlink" title="Android 8.0é€‚é…"></a>Android 8.0é€‚é…</h1><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>å°†æˆ‘ä»¬é¡¹ç›®ä¸­çš„targetSdkVersionæ”¹ä¸º 26ï¼ˆ8.0ï¼‰ æˆ–è€… 27ï¼ˆ8.1ï¼‰ï¼Œè®°ä½ä¸è¦è¶…è¿‡27ï¼Œæ¯•ç«Ÿæˆ‘è¿˜æ²¡æœ‰å‘Šè¯‰ä½ Android Pæ€ä¹ˆé€‚é…ï¼ˆ/æ»‘ç¨½ï¼‰ã€‚</p>
<h2 id="Android-8-0-è¡Œä¸ºå˜æ›´"><a href="#Android-8-0-è¡Œä¸ºå˜æ›´" class="headerlink" title="Android 8.0 è¡Œä¸ºå˜æ›´"></a>Android 8.0 è¡Œä¸ºå˜æ›´</h2><h3 id="1-æé†’çª—å£"><a href="#1-æé†’çª—å£" class="headerlink" title="1.æé†’çª—å£"></a>1.æé†’çª—å£</h3><p>å¦‚æœåº”ç”¨ä½¿ç”¨ <figure class="highlight plain"><figcaption><span>æƒé™çš„åº”ç”¨æ— æ³•å†ä½¿ç”¨ä»¥ä¸‹çª—å£ç±»å‹æ¥åœ¨å…¶ä»–åº”ç”¨å’Œç³»ç»Ÿçª—å£ä¸Šæ–¹æ˜¾ç¤ºæé†’çª—å£ï¼š</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">- TYPE_PHONE</span><br><span class="line">- TYPE_PRIORITY_PHONE</span><br><span class="line">- TYPE_SYSTEM_ALERT</span><br><span class="line">- TYPE_SYSTEM_OVERLAY</span><br><span class="line">- TYPE_SYSTEM_ERROR</span><br></pre></td></tr></table></figure></p>
<p>ç›¸åï¼Œåº”ç”¨å¿…é¡»ä½¿ç”¨åä¸º <figure class="highlight plain"><figcaption><span>çš„æ–°çª—å£ç±»å‹ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¹Ÿå°±æ˜¯è¯´éœ€è¦åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šåˆ¤æ–­ä¸€ä¸‹ï¼š</span><br></pre></td></tr></table></figure></p>
<p>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {<br>    mWindowParams.type = WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY<br>}else {<br>    mWindowParams.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å½“ç„¶è®°å¾—éœ€è¦æœ‰æƒé™</span><br></pre></td></tr></table></figure></p>
<p><uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"></uses-permission></p>
<p><uses-permission android:name="android.permission.SYSTEM_OVERLAY_WINDOW"></uses-permission></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä½¿ç”¨ ```TYPE_APPLICATION_OVERLAY``` çª—å£ç±»å‹æ˜¾ç¤ºåº”ç”¨çš„æé†’çª—å£æ—¶ï¼Œè¯·è®°ä½æ–°çª—å£ç±»å‹çš„ä»¥ä¸‹ç‰¹æ€§ï¼š</span><br></pre></td></tr></table></figure>
<ul>
<li>åº”ç”¨çš„æé†’çª—å£å§‹ç»ˆæ˜¾ç¤ºåœ¨çŠ¶æ€æ å’Œè¾“å…¥æ³•ç­‰å…³é”®ç³»ç»Ÿçª—å£çš„ä¸‹é¢ã€‚</li>
<li>ç³»ç»Ÿå¯ä»¥ç§»åŠ¨ä½¿ç”¨ TYPE_APPLICATION_OVERLAY çª—å£ç±»å‹çš„çª—å£æˆ–è°ƒæ•´å…¶å¤§å°ï¼Œä»¥æ”¹å–„å±å¹•æ˜¾ç¤ºæ•ˆæœã€‚</li>
<li>é€šè¿‡æ‰“å¼€é€šçŸ¥æ ï¼Œç”¨æˆ·å¯ä»¥è®¿é—®è®¾ç½®æ¥é˜»æ­¢åº”ç”¨æ˜¾ç¤ºä½¿ç”¨ TYPE_APPLICATION_OVERLAY çª—å£ç±»å‹æ˜¾ç¤ºçš„æé†’çª—å£ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">### 2.ç½‘é¡µè¡¨å•è‡ªåŠ¨å¡«å……</span><br><span class="line">ç°åœ¨ï¼ŒAndroid è‡ªåŠ¨å¡«å……æ¡†æ¶æä¾›å¯¹è‡ªåŠ¨å¡«å……åŠŸèƒ½çš„å†…ç½®æ”¯æŒï¼Œå¯¹äºå®‰è£…åˆ°è¿è¡Œ Android 8.0 çš„è®¾å¤‡ä¸Šçš„åº”ç”¨ï¼Œä¸ WebView å¯¹è±¡ç›¸å…³çš„ä¸‹åˆ—å‡½æ•°å·²ç»å‘ç”Ÿå˜åŒ–ï¼š</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>WebSettings</p>
<ul>
<li>getSaveFormData() å‡½æ•°ç°åœ¨è¿”å› falseã€‚ä¹‹å‰ï¼Œæ­¤å‡½æ•°è¿”å› trueã€‚</li>
<li>è°ƒç”¨ setSaveFormData() ä¸å†æœ‰ä»»ä½•æ•ˆæœã€‚<br>WebViewDatabase</li>
<li>è°ƒç”¨ clearFormData() ä¸å†æœ‰ä»»ä½•æ•ˆæœã€‚</li>
<li>hasFormData() å‡½æ•°ç°åœ¨è¿”å› falseã€‚ä¹‹å‰ï¼Œå½“è¡¨å•åŒ…å«æ•°æ®æ—¶ï¼Œæ­¤å‡½æ•°è¿”å› trueã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">### 3.é›†åˆçš„å¤„ç†</span><br><span class="line">åœ¨ Android 8.0 ä¸­ï¼ŒCollections.sort() æ˜¯åœ¨ List.sort() çš„åŸºç¡€ä¸Šå®ç°çš„ã€‚åœ¨ Android 7.xï¼ˆAPI çº§åˆ« 24 å’Œ 25ï¼‰ä¸­ï¼Œåˆ™æ°æ°ç›¸åã€‚åœ¨è¿‡å»ï¼ŒList.sort() çš„é»˜è®¤å®ç°ä¼šè°ƒç”¨ Collections.sort()ã€‚</span><br><span class="line">- List.sort() çš„å®ç°ä¸èƒ½è°ƒç”¨ Collections.sort()ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´å †æ ˆå› æ— é™é€’å½’è€Œæº¢å‡ºã€‚ç›¸åï¼Œå¦‚æœæ‚¨éœ€è¦ List å®ç°çš„é»˜è®¤è¡Œä¸ºï¼Œåº”é¿å…é‡å†™ sort()ã€‚</span><br><span class="line">æ­¤é¡¹å˜æ›´ä½¿ Collections.sort() å¯ä»¥åˆ©ç”¨ä¼˜åŒ–çš„ List.sort() å®ç°ï¼Œä½†å…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</span><br><span class="line">    - å¦‚æœçˆ¶ç±»ä»¥ä¸é€‚å½“çš„æ–¹æ³•å®ç° sort() ï¼Œé€šå¸¸æœ€å¥½ä½¿ç”¨åœ¨ List.toArray()ã€Arrays.sort() å’Œ ListIterator.set() çš„åŸºç¡€ä¸Šæ„å»ºçš„å®ç°é‡å†™ List.sort()ã€‚</span><br><span class="line"></span><br><span class="line">    - å¦‚æœæ‚¨é€‰æ‹©åè€…åªæ˜¯å› ä¸ºæ‚¨å¸Œæœ›å¼€å‘ä¸€ç§é€‚ç”¨äºæ‰€æœ‰ API çº§åˆ«çš„ sort() å‡½æ•°ï¼Œå¯ä»¥è€ƒè™‘èµ‹äºˆå…¶ä¸€ä¸ªå”¯ä¸€çš„åç§°ï¼Œä¾‹å¦‚ sortCompat()ï¼Œè€Œä¸æ˜¯é‡å†™ sort()ã€‚</span><br><span class="line">- ç°åœ¨ï¼ŒCollections.sort() åªæ˜¯å¯¹è°ƒç”¨ sort() çš„ List å®ç°è¿›è¡Œçš„ä¸€é¡¹ç»“æ„æ€§ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ Android 8.0 ä¹‹å‰çš„å¹³å°ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœé€šè¿‡è°ƒç”¨ List.sort() è¿›è¡Œæ’åºï¼Œåˆ™å½“è¿­ä»£å¤„ç† ArrayList ä»¥åŠåœ¨è¿­ä»£è¿‡ç¨‹ä¸­è°ƒç”¨ sort() æ—¶ï¼Œä¼šå¼•å‘ ConcurrentModificationExceptionã€‚è€Œ Collections.sort() åˆ™ä¸ä¼šå¼•å‘å¼‚å¸¸ã€‚</span><br><span class="line">    æ­¤é¡¹å˜æ›´ä½¿å¹³å°è¡Œä¸ºæ›´åŠ ä¸€è‡´ï¼šç°åœ¨ï¼Œä¸¤ç§æ–¹æ³•éƒ½ä¼šå¼•å‘ ConcurrentModificationExceptionã€‚</span><br><span class="line"></span><br><span class="line">ç°åœ¨ï¼Œ```AbstractCollection.removeAll() ```å’Œ ```AbstractCollection.retainAll()``` å§‹ç»ˆå¼•å‘ ```NullPointerException```ï¼›ä¹‹å‰ï¼Œå½“é›†åˆä¸ºç©ºæ—¶ä¸ä¼šå¼•å‘ ```NullPointerException``` æ‰€ä»¥æˆ‘ä»¬éœ€è¦åšåˆ¤ç©ºå¤„ç†ã€‚ã€‚</span><br><span class="line">### 4.è¿è¡Œæ—¶æƒé™</span><br><span class="line">åœ¨ Android 8.0 ä¹‹å‰ï¼Œå¦‚æœåº”ç”¨åœ¨è¿è¡Œæ—¶è¯·æ±‚æƒé™å¹¶ä¸”è¢«æˆäºˆè¯¥æƒé™ï¼Œç³»ç»Ÿä¼šé”™è¯¯åœ°å°†å±äºåŒä¸€æƒé™ç»„å¹¶ä¸”åœ¨æ¸…å•ä¸­æ³¨å†Œçš„å…¶ä»–æƒé™ä¹Ÿä¸€èµ·æˆäºˆåº”ç”¨ã€‚</span><br><span class="line"></span><br><span class="line">å¯¹äºé’ˆå¯¹ Android 8.0 çš„åº”ç”¨ï¼Œæ­¤è¡Œä¸ºå·²è¢«çº æ­£ã€‚ç³»ç»Ÿåªä¼šæˆäºˆåº”ç”¨æ˜ç¡®è¯·æ±‚çš„æƒé™ã€‚ç„¶è€Œï¼Œä¸€æ—¦ç”¨æˆ·ä¸ºåº”ç”¨æˆäºˆæŸä¸ªæƒé™ï¼Œåˆ™æ‰€æœ‰åç»­å¯¹è¯¥æƒé™ç»„ä¸­æƒé™çš„è¯·æ±‚éƒ½å°†è¢«è‡ªåŠ¨æ‰¹å‡†ã€‚</span><br><span class="line"></span><br><span class="line">#### æ‰€ä»¥æ€»ç»“ä¸‹æ¥ï¼Œå¦‚æœä½ ä¹‹å‰æ˜¯ç”¨ä»€ä¹ˆæƒé™å°±å»ç”³è¯·ä»€ä¹ˆæƒé™ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œè¿™ä¸ªå˜åŒ–ä¸ä¼šå½±å“åˆ°ä½ ã€‚</span><br><span class="line">#### å¦‚æœä½ åªç”³è¯·äº†æƒé™ç»„ä¸­çš„æŸäº›æƒé™ï¼Œå´ç”¨äº†åŒç»„çš„å…¶ä»–æƒé™ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦å»é€‚é…ä¸€ä¸‹äº†ã€‚</span><br><span class="line"></span><br><span class="line">é‚£ä¹ˆæ€ä¹ˆé€‚é…å‘¢ï¼Œå¦‚æœä½ å»æ£€æŸ¥ä¹‹å‰æ¯ä¸ªç”³è¯·æƒé™çš„åœ°æ–¹ï¼Œæœªå…å¤ªè¿‡éº»çƒ¦ã€‚é‚£ä¹ˆä½ å¯ä»¥æ ¹æ®ä½ é¡¹ç›®ä¸­çš„Manifestæ–‡ä»¶ä¸­éœ€è¦çš„æƒé™ä¸æƒé™ç»„å»å¯¹æ¯”ï¼Œæ•´ç†å‡ºä½ éœ€è¦ç”³è¯·çš„å„ä¸ªæƒé™ç»„,ç„¶åç”³è¯·è¯¥æƒé™ç»„</span><br><span class="line">### 5.é€šçŸ¥é€‚é…</span><br><span class="line">8.0åœ¨é€šçŸ¥è¿™é‡Œå˜åŒ–è¿˜æŒºå¤šçš„ï¼Œæ¯”å¦‚é€šçŸ¥æ¸ é“ã€é€šçŸ¥æ ‡å¿—ã€é€šçŸ¥è¶…æ—¶ã€èƒŒæ™¯é¢œè‰²çš„ç­‰ï¼Œè¯¦ç»†çš„è¯´æ˜å¯ä»¥å»çœ‹å®˜æ–¹çš„Android 8.0 [åŠŸèƒ½å’Œ API](https://developer.android.google.cn/guide/topics/ui/notifiers/notifications#ManageChannels)ã€‚</span><br><span class="line">#### - é€šçŸ¥æ¸ é“ï¼š</span><br><span class="line">Android 8.0 å¼•å…¥äº†é€šçŸ¥æ¸ é“ï¼Œå…¶å…è®¸æ‚¨ä¸ºè¦æ˜¾ç¤ºçš„æ¯ç§é€šçŸ¥ç±»å‹åˆ›å»ºç”¨æˆ·å¯è‡ªå®šä¹‰çš„æ¸ é“ã€‚ç”¨æˆ·ç•Œé¢å°†é€šçŸ¥æ¸ é“ç§°ä¹‹ä¸ºé€šçŸ¥ç±»åˆ«ã€‚[è¯¦è§ https://developer.android.com/training/notify-user/channels](https://developer.android.google.cn/training/notify-user/channels ) </span><br><span class="line">![image](http://upload-images.jianshu.io/upload_images/4974296-689527687f761e84.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line"></span><br><span class="line">å¯ä»¥çœ‹åˆ°é«˜å¾·åœ°å›¾åˆ†çš„å¾ˆç»†è‡´ï¼Œåˆ†ä¸ºå››ä¸ªç»„å…±13ä¸ªç±»åˆ«(åä¸ºè²Œä¼¼å¯¹ç»„ä¸ç”Ÿæ•ˆ)ã€‚è¿™æ ·æœ‰ä¸ªå¥½å¤„ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æˆ‘ä»¬æƒ³æ”¶åˆ°çš„é€šçŸ¥ï¼Œæ¯”å¦‚æˆ‘ä¸å–œæ¬¢è¿è¥æ´»åŠ¨é€šçŸ¥ï¼Œé‚£æˆ‘å°±å¯ä»¥æŠŠå®ƒå…³é—­ã€‚</span><br><span class="line"></span><br><span class="line">è¿™æ ·é¿å…å¤§é‡çš„ä¸å¿…è¦é€šçŸ¥ï¼Œå¦åˆ™ä½¿å¾—ç”¨æˆ·è§‰å¾—çƒ¦ï¼Œä¸€æ£’å­æ‰“æ­»ã€‚ç›´æ¥å…³é—­ä½ çš„å…è®¸é€šçŸ¥ã€‚å½“ç„¶äº†ï¼Œå¤§é‡appéƒ½è¿˜æ²¡æœ‰é€‚é…ï¼Œé€‚é…çš„ä¹Ÿéƒ½åˆ†çš„ä¸æ˜¯å¾ˆç»†è‡´.</span><br><span class="line"></span><br><span class="line">å½“ç„¶æ›´é‡è¦çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœä¸å»é€‚é…ï¼Œå¯èƒ½é€šçŸ¥éƒ½ä¸ä¼šå¼¹å‡ºæ¥ã€‚é‚£ä¹ˆé€‚é…çš„æ–¹æ³•å¦‚ä¸‹ï¼š</span><br></pre></td></tr></table></figure>
<p>private void createNotificationChannel() {<br>    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {</p>
<pre><code>    NotificationManager notificationManager = (NotificationManager)
            getSystemService(Context.NOTIFICATION_SERVICE);

    //åˆ†ç»„ï¼ˆå¯é€‰ï¼‰
    //groupIdè¦å”¯ä¸€
    String groupId = &quot;group_001&quot;;
    NotificationChannelGroup group = new NotificationChannelGroup(groupId, &quot;å¹¿å‘Š&quot;);

    //åˆ›å»ºgroup
    notificationManager.createNotificationChannelGroup(group);

    //channelIdè¦å”¯ä¸€
    String channelId = &quot;channel_001&quot;;

    NotificationChannel adChannel = new NotificationChannel(channelId,
            &quot;æ¨å¹¿ä¿¡æ¯&quot;, NotificationManager.IMPORTANCE_DEFAULT);
    //è¡¥å……channelçš„å«ä¹‰ï¼ˆå¯é€‰ï¼‰
    adChannel.setDescription(&quot;æ¨å¹¿ä¿¡æ¯&quot;);
    //å°†æ¸ é“æ·»åŠ è¿›ç»„ï¼ˆå…ˆåˆ›å»ºç»„æ‰èƒ½æ·»åŠ ï¼‰
    adChannel.setGroup(groupId);
    //åˆ›å»ºchannel
    notificationManager.createNotificationChannel(adChannel);

    //åˆ›å»ºé€šçŸ¥æ—¶ï¼Œæ ‡è®°ä½ çš„æ¸ é“id
    Notification notification = new Notification.Builder(MainActivity.this, channelId)
            .setSmallIcon(R.mipmap.ic_launcher)
            .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher))
            .setContentTitle(&quot;ä¸€æ¡æ–°é€šçŸ¥&quot;)
            .setContentText(&quot;è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯&quot;)
            .setAutoCancel(true)
            .build();
    notificationManager.notify(1, notification);

}
</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ•ˆæœå¦‚ä¸‹:</span><br><span class="line"></span><br><span class="line">![image](http://upload-images.jianshu.io/upload_images/4974296-247c2245c0bc42f6.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">åä¸ºæ‰‹æœºå½“åªæœ‰ä¸€ä¸ªæ¸ é“æ—¶ï¼Œä¸ä¼šæ˜¾ç¤ºï¼Œä¼šå½“åšé»˜è®¤é€šçŸ¥å¤„ç†ï¼Œé™¤éä¸€ä¸ªä»¥ä¸Šã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šå½“Channelå·²ç»å­˜åœ¨æ—¶ï¼Œåé¢çš„createNotificationChannelæ–¹æ³•ä»…èƒ½æ›´æ–°å…¶name/descriptionï¼Œä»¥åŠå¯¹importanceè¿›è¡Œé™çº§ï¼Œå…¶ä½™é…ç½®å‡æ— æ³•æ›´æ–°ã€‚æ‰€ä»¥å¦‚æœæœ‰å¿…è¦çš„ä¿®æ”¹åªèƒ½åˆ›å»ºæ–°çš„æ¸ é“ï¼Œåˆ é™¤æ—§æ¸ é“ã€‚</span><br><span class="line"></span><br><span class="line">åˆ é™¤æ¸ é“ä»£ç å¦‚ä¸‹ï¼š</span><br></pre></td></tr></table></figure></p>
<p>private void deleteNotificationChannel(String channelId){<br>    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {<br>        NotificationManager mNotificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);<br>        mNotificationManager.deleteNotificationChannel(channelId);<br>    }<br>}<br><code>`</code></p>
<h3 id="6-åå°é™åˆ¶æ‰§è¡Œ"><a href="#6-åå°é™åˆ¶æ‰§è¡Œ" class="headerlink" title="6.åå°é™åˆ¶æ‰§è¡Œ"></a>6.åå°é™åˆ¶æ‰§è¡Œ</h3><p><a href="https://developer.android.google.cn/about/versions/oreo/background" target="_blank" rel="noopener">å…·ä½“è¯´æ˜https://developer.android.google.cn/about/versions/oreo/background</a></p>
<p>åº”ç”¨åœ¨ä¸¤ä¸ªæ–¹é¢å—åˆ°é™åˆ¶ï¼š</p>
<p><strong>åå°æœåŠ¡é™åˆ¶:</strong> å¤„äºç©ºé—²çŠ¶æ€æ—¶ï¼Œåº”ç”¨å¯ä»¥ä½¿ç”¨çš„åå°æœåŠ¡å­˜åœ¨é™åˆ¶ã€‚ è¿™äº›é™åˆ¶ä¸é€‚ç”¨äºå‰å°æœåŠ¡ï¼Œå› ä¸ºå‰å°æœåŠ¡æ›´å®¹æ˜“å¼•èµ·ç”¨æˆ·æ³¨æ„ã€‚</p>
<p><strong>å¹¿æ’­é™åˆ¶ï¼š</strong> é™¤äº†æœ‰é™çš„ä¾‹å¤–æƒ…å†µï¼Œåº”ç”¨æ— æ³•ä½¿ç”¨æ¸…å•æ³¨å†Œéšå¼å¹¿æ’­ã€‚ å®ƒä»¬ä»ç„¶å¯ä»¥åœ¨è¿è¡Œæ—¶æ³¨å†Œè¿™äº›å¹¿æ’­ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨æ¸…å•æ³¨å†Œä¸“é—¨é’ˆå¯¹å®ƒä»¬çš„æ˜¾å¼å¹¿æ’­ã€‚</p>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”ç”¨éƒ½å¯ä»¥ä½¿ç”¨ JobScheduler å…‹æœè¿™äº›é™åˆ¶ã€‚ è¿™ç§æ–¹å¼è®©åº”ç”¨å®‰æ’ä¸ºåœ¨æœªæ´»è·ƒè¿è¡Œæ—¶æ‰§è¡Œå·¥ä½œï¼Œä¸è¿‡ä»èƒ½å¤Ÿä½¿ç³»ç»Ÿå¯ä»¥åœ¨ä¸å½±å“ç”¨æˆ·ä½“éªŒçš„æƒ…å†µä¸‹å®‰æ’è¿™äº›ä½œä¸šã€‚</p>
<p>å…³äºçš„ç”¨æ³•å¯ä»¥å‚è€ƒå®˜æ–¹ä¾‹å­ï¼šandroid-JobScheduler<br><a href="https://github.com/googlesamples/android-JobScheduler" target="_blank" rel="noopener">https://github.com/googlesamples/android-JobScheduler</a></p>
<p>å½“ç„¶è¿˜æœ‰åå°ä½ç½®çš„é™åˆ¶éœ€è¦å»æ³¨æ„ã€‚<br><a href="https://developer.android.google.cn/about/versions/oreo/background-location-limits" target="_blank" rel="noopener">https://developer.android.google.cn/about/versions/oreo/background-location-limits</a></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><p>MIUI 10 é€šçŸ¥ç±»åˆ« / Channel é€‚é…</p>
<p>  <a href="https://dev.mi.com/console/doc/detail?pId=1303" target="_blank" rel="noopener">https://dev.mi.com/console/doc/detail?pId=1303</a></p>
</li>
<li>Create and Manage Notification Channels<br>  <a href="https://developer.android.google.cn/training/notify-user/channels" target="_blank" rel="noopener">https://developer.android.google.cn/training/notify-user/channels</a></li>
<li>Presentation of Notifications<br><a href="https://source.android.google.cn/compatibility/8.0/android-8.0-cdd#3_8_user_interface_compatibility" target="_blank" rel="noopener">https://source.android.google.cn/compatibility/8.0/android-8.0-cdd#3_8_user_interface_compatibility</a></li>
<li>Android å®ç°åº”ç”¨æ›´æ–°é€‚é… Android O<br><a href="https://blog.csdn.net/mq2856992713/article/details/79688587" target="_blank" rel="noopener">https://blog.csdn.net/mq2856992713/article/details/79688587</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        

        
        è¿™é‡Œå¯ä»¥å†™ä½œè€…ç•™è¨€ï¼Œæ ‡ç­¾å’Œ hexo ä¸­æ‰€æœ‰å˜é‡åŠè¾…åŠ©å‡½æ•°ç­‰å‡å¯è°ƒç”¨ï¼Œç¤ºä¾‹ï¼š<a href="/2018/03/10/Android 8.0é€‚é…/" target="_blank" rel="external">https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/</a>
        
    </div>
    
    <footer>
        <a href="https://www.jianshu.com/u/3e759a2c717f">
            <img src="/img/avater.png" alt="Yaisn Yao">
            Yaisn Yao
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-8-0/">Android 8.0</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/&title=ã€ŠAndroid 8.0é€‚é…ã€‹ â€” We're here to put a dent in the universe&pic=https://www.jianshu.com/u/3e759a2c717f/img/avater.png" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/&title=ã€ŠAndroid 8.0é€‚é…ã€‹ â€” We're here to put a dent in the universe&source=æœ¬æ–‡ä¸»è¦è¯´Android 8.0é€‚é…" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠAndroid 8.0é€‚é…ã€‹ â€” We're here to put a dent in the universe&url=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/&via=https://www.jianshu.com/u/3e759a2c717f" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/03/19/Android ç»„ä»¶åŒ–è§„èŒƒ/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Android ç»„ä»¶åŒ–è§„èŒƒ</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/03/05/Androidå¤šç‚¹è§¦æ§æ—¶å‡ºç°pointerIndex out of range çš„é”™è¯¯åˆ†æ/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Androidå¤šç‚¹è§¦æ§æ—¶å‡ºç°pointerIndex out of range çš„é”™è¯¯åˆ†æ</h4>
      </a>
    </div>
  
</nav>



    


<section class="comments" id="comments">
    <div id="disqus_thread"></div>
    <script>
    var disqus_shortname = 'true';
    lazyScripts.push('//' + disqus_shortname + '.disqus.com/embed.js')
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>
















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        æ„Ÿè°¢æ”¯æŒğŸ™
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpeg" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.jpeg" data-alipay="/img/alipay.jpeg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/&title=ã€ŠAndroid 8.0é€‚é…ã€‹ â€” We're here to put a dent in the universe&pic=https://www.jianshu.com/u/3e759a2c717f/img/avater.png" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/&title=ã€ŠAndroid 8.0é€‚é…ã€‹ â€” We're here to put a dent in the universe&source=æœ¬æ–‡ä¸»è¦è¯´Android 8.0é€‚é…" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠAndroid 8.0é€‚é…ã€‹ â€” We're here to put a dent in the universe&url=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/&via=https://www.jianshu.com/u/3e759a2c717f" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://www.jianshu.com/u/3e759a2c717f/2018/03/10/Android 8.0é€‚é…/" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'YasinYaoçš„ä¸ªäººåšå®¢';
            clearTimeout(titleTime);
        } else {
            document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
